@page
@model ExpenseManagement.Pages.IndexModel
@{
    ViewData["Title"] = "Expense Management";
}

@if (!string.IsNullOrEmpty(Model.ErrorMessage))
{
    <div class="error-banner">
        <strong>âš ï¸ Database Error:</strong> @Model.ErrorMessage
    </div>
}

<div class="dashboard">
    <div class="header-section">
        <h1>Expense Management System</h1>
        <p class="subtitle">Manage and track your expenses efficiently</p>
    </div>

    <!-- Summary Cards -->
    <div class="summary-cards">
        @foreach (var summary in Model.ExpenseSummary)
        {
            <div class="summary-card @summary.StatusName.ToLower()">
                <div class="card-icon">
                    @if (summary.StatusName == "Draft") { <span>ğŸ“</span> }
                    else if (summary.StatusName == "Submitted") { <span>ğŸ“¤</span> }
                    else if (summary.StatusName == "Approved") { <span>âœ…</span> }
                    else { <span>âŒ</span> }
                </div>
                <div class="card-content">
                    <h3>@summary.StatusName</h3>
                    <p class="count">@summary.ExpenseCount expenses</p>
                    <p class="total">@summary.FormattedTotal</p>
                </div>
            </div>
        }
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <a href="/AddExpense" class="btn btn-primary">
            <span>â•</span> Add New Expense
        </a>
        <a href="/Expenses" class="btn btn-secondary">
            <span>ğŸ“‹</span> View All Expenses
        </a>
        <a href="/Approve" class="btn btn-success">
            <span>âœ”ï¸</span> Approve Expenses
        </a>
        <a href="/Chat" class="btn btn-info">
            <span>ğŸ’¬</span> Chat Assistant
        </a>
    </div>

    <!-- Recent Expenses -->
    <div class="recent-section">
        <h2>Recent Expenses</h2>
        <div class="expenses-table-container">
            <table class="expenses-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Category</th>
                        <th>Amount</th>
                        <th>Status</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var expense in Model.RecentExpenses)
                    {
                        <tr>
                            <td>@expense.FormattedDate</td>
                            <td>@expense.CategoryName</td>
                            <td class="amount">@expense.FormattedAmount</td>
                            <td><span class="status-badge @expense.StatusName.ToLower()">@expense.StatusName</span></td>
                            <td>@expense.Description</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
